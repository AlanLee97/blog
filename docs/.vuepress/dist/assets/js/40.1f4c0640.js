(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{477:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_06-selenium使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_06-selenium使用"}},[t._v("#")]),t._v(" 06-selenium使用")]),t._v(" "),s("p",[t._v("什么是 selenium ？")]),t._v(" "),s("p",[t._v("其实它就是一个自动化测试工具，支持各种主流的浏览器")]),t._v(" "),s("h2",{attrs:{id:"使用selenium"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用selenium"}},[t._v("#")]),t._v(" 使用selenium")]),t._v(" "),s("p",[t._v("1.下载浏览器驱动")]),t._v(" "),s("p",[t._v("使用selenium时，要确保所用的chrome浏览器跟chrome驱动版本对应，否则就会报错。\n驱动下载地址\nhttp://chromedriver.storage.googleapis.com/index.html")]),t._v(" "),s("p",[t._v("浏览器驱动下载地址")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("Chrome")]),t._v(":")]),t._v(" "),s("th",[t._v("https://sites.google.com/a/chromium.org/chromedriver/downloads")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("Edge")]),t._v(":")]),t._v(" "),s("td",[t._v("https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Firefox")]),t._v(":")]),t._v(" "),s("td",[t._v("https://github.com/mozilla/geckodriver/releases")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Safari")]),t._v(":")]),t._v(" "),s("td",[t._v("https://webkit.org/blog/6900/webdriver-support-in-safari-10/")])])])]),t._v(" "),s("p",[t._v("解压下载的驱动")]),t._v(" "),s("p",[t._v("2.配置环境变量")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://alanlee-image-bed.oss-cn-shenzhen.aliyuncs.com/note_images/20200214115432-315946.png",alt:"image-20200214115431488"}})]),t._v(" "),s("p",[t._v("3.编写代码")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导入 web 驱动模块")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个 Chrome 驱动")]),t._v("\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用 get 方法打开百度")]),t._v("\nurl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.baidu.com/'")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取到输入框")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_css_selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#kw'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取到输入框之后我们就往里面写入我们要搜索的内容")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("input")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'海的照片'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取到搜索按钮")]),t._v("\nbtn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_css_selector"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#su'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 按钮点击")]),t._v("\nbtn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"E:/%E6%88%91%E7%9A%84%E5%9D%9A%E6%9E%9C%E4%BA%91/OneDrive/%E5%AD%A6%E4%B9%A0/%E7%AC%94%E8%AE%B0/%E5%9B%BE%E7%89%87/note_images/image-20200214115815009.png",alt:"image-20200214115815009"}})]),t._v(" "),s("h2",{attrs:{id:"selenium常用方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#selenium常用方法"}},[t._v("#")]),t._v(" selenium常用方法")]),t._v(" "),s("p",[t._v("selenium 提供了挺多方法给我们获取的")]),t._v(" "),s("p",[t._v("当我们要在页面中获取一个元素的时候，可以使用这些方法")]),t._v(" "),s("ul",[s("li",[t._v("find_element_by_id")]),t._v(" "),s("li",[t._v("find_element_by_name")]),t._v(" "),s("li",[t._v("find_element_by_xpath")]),t._v(" "),s("li",[t._v("find_element_by_link_text")]),t._v(" "),s("li",[t._v("find_element_by_partial_link_text")]),t._v(" "),s("li",[t._v("find_element_by_tag_name")]),t._v(" "),s("li",[t._v("find_element_by_class_name")]),t._v(" "),s("li",[t._v("find_element_by_css_selector")])]),t._v(" "),s("p",[t._v("比如我们打开了一个页面")]),t._v(" "),s("p",[t._v("是这样的 HTML")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("form")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("loginForm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("login"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("continue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("submit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Login"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("可以通过 id 获取 form 表单")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("login_form = driver.find_element_by_id('loginForm')\n")])])]),s("p",[t._v("通过 name 获取相应的输入框")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("username = driver.find_element_by_name('username')\npassword = driver.find_element_by_name('password')\n")])])]),s("p",[t._v("通过 xpath 获取表单")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('login_form = driver.find_element_by_xpath("/html/body/form[1]")\nlogin_form = driver.find_element_by_xpath("//form[1]")\nlogin_form = driver.find_element_by_xpath("//form[@id=\'loginForm\']")\n')])])]),s("p",[t._v("通过标签获取相应的输入框")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("input1 = driver.find_element_by_tag_name('input')\n")])])]),s("p",[t._v("class 获取相应的元素")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("login = driver.find_element_by_class_name('login')\n")])])]),s("p",[t._v("用 Chrome 浏览器的审核元素")]),t._v(" "),s("p",[t._v("可以很方便获取相应的属性")]),t._v(" "),s("p",[t._v("直接 copy 就完事了")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://alanlee-image-bed.oss-cn-shenzhen.aliyuncs.com/note_images/20200214120344-438946.gif",alt:"img"}})]),t._v(" "),s("p",[t._v("如果觉得find_element_by_xxx_xxx太长了，那么我们还可以这样写")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("driver.find_elements(By.ID, 'xxx')\n")])])]),s("p",[t._v("By.属性和上面的是一样的")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('ID = "id"\nXPATH = "xpath"\nLINK_TEXT = "link text"\nPARTIAL_LINK_TEXT = "partial link text"\nNAME = "name"\nTAG_NAME = "tag name"\nCLASS_NAME = "class name"\nCSS_SELECTOR = "css selector"\n')])])]),s("p",[s("strong",[t._v("其他方法")])]),t._v(" "),s("p",[t._v("获取请求链接")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("driver.current_url\n")])])]),s("p",[t._v("获取 cookies")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("driver.get_cookies()\n")])])]),s("p",[t._v("获取源代码")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("driver.page_source\n")])])]),s("p",[t._v("获取文本的值")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("input.text\n")])])]),s("p",[t._v("以上就是 selenium 的常用方法")]),t._v(" "),s("p",[t._v("想要了解更多相关 selenium 的可以到官方文档查看")]),t._v(" "),s("p",[t._v("https://selenium-python.readthedocs.io/")]),t._v(" "),s("h2",{attrs:{id:"使用phantomjs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用phantomjs"}},[t._v("#")]),t._v(" 使用phantomjs")]),t._v(" "),s("ol",[s("li",[t._v("下载phantomjs")])]),t._v(" "),s("p",[t._v("下载地址http://phantomjs.org/download.html")]),t._v(" "),s("p",[t._v("下载后解压")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("配置环境变量")])]),t._v(" "),s("p",[s("img",{attrs:{src:"E:/%E6%88%91%E7%9A%84%E5%9D%9A%E6%9E%9C%E4%BA%91/OneDrive/%E5%AD%A6%E4%B9%A0/%E7%AC%94%E8%AE%B0/%E5%9B%BE%E7%89%87/note_images/image-20200214143716577.png",alt:"image-20200214143716577"}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("将 Chrome 换成 phantomjs")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("browser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PhantomJS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);